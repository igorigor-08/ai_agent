# AI-ассистент ПРМ "Паром"

## Кейс 01.Риск-инструменты: AI-агент для портфельных аналитиков 
## Описание проекта

AI-ассистент ПРМ "Паром" — это интеллектуальный text2sql помощник для портфельных аналитиков.

## Как воспользоваться AI-агентом

Чтобы начать использовать AI-ассистента, перейдите по [http://212.67.8.208:5021/](#).

### Особенности взаимодействия с агентом

- AI-ассистент работает только с запросами, связанными с данными из нашей синтезированной базы данных.  
- Запросы должны быть четко сформулированы и касаться тематики анализа портфелей.  

### Краткое описание базы данных

**Таблица:** ***individual_borrowers***

individual_id (SERIAL): Уникальный идентификатор физического заемщика.
date_of_birth (DATE): Дата рождения заемщика.

**Таблица:** ***company_borrowers***

company_id (SERIAL): Уникальный идентификатор компании-заемщика.
company_name (VARCHAR(100)): Название компании (обязательное поле).
business_sector (ENUM): Сектор бизнеса ('Информационные технологии', 'Финансовые организации', 'Коммерция', 'Энергетика', 'Производство', 'Недвижимость').

**Таблица:** ***credit_products***

product_id (SERIAL): Уникальный идентификатор кредитного продукта.
product_name (ENUM): Тип продукта ('Потребительский кредит', 'Ипотека', 'Автокредит', 'Кредитная карта', 'Бизнес-кредит', 'Возобновляемая кредитная линия', 'Гарантия').
interest_rate (NUMERIC(5,2)): Процентная ставка (например, 5.25%).
min_loan_amount (NUMERIC(15,2)): Минимальная сумма займа.
max_loan_amount (NUMERIC(15,2)): Максимальная сумма займа.
term_months (INTEGER): Срок займа в месяцах.

**Таблица:** ***credits***

credit_id (SERIAL): Уникальный идентификатор кредита.
individual_id (INTEGER): Ссылка на физического заемщика (может быть NULL, если кредит выдан компании).
company_id (INTEGER): Ссылка на компанию-заемщика (может быть NULL, если кредит выдан физическому лицу).
product_id (INTEGER): Ссылка на кредитный продукт (обязательное поле).
loan_amount (NUMERIC(15,2)): Сумма кредита.
interest_rate (NUMERIC(5,2)): Процентная ставка по кредиту.
start_date (DATE): Дата начала кредита.
end_date (DATE): Планируемая дата погашения (может быть NULL для бессрочных кредитов).
status (ENUM): Статус кредита ('Активный', 'Закрытый', 'Дефолт'). Значение по умолчанию — Активный.

**Таблица:** ***client_transactions***

transaction_id (SERIAL): Уникальный идентификатор транзакции.
credit_id (INTEGER): Ссылка на кредит.
transaction_type (ENUM): Тип транзакции ('Выплата основного долга', 'Выплата просроченного долга', 'Выплата штрафов').
amount (NUMERIC(15,2)): Сумма транзакции.
transaction_date (TIMESTAMP): Дата и время транзакции.

**Таблица:** ***risk_ratings***

rating_id (SERIAL): Уникальный идентификатор оценки риска.
individual_id (INTEGER): Ссылка на физического заемщика (может быть NULL, если оценка для компании).
company_id (INTEGER): Ссылка на компанию-заемщика (может быть NULL, если оценка для физического лица).
credit_id (INTEGER): Ссылка на кредит (обязательное поле).
rating (INTEGER): Оценка риска (1 — минимальный риск, 26 — максимальный риск).
probability_of_default (NUMERIC(5,4)): Вероятность дефолта (от 0.0000 до 1.0000).
rating_date (DATE): Дата оценки.

**Таблица:** ***defaults***

default_id (SERIAL): Уникальный идентификатор дефолта.
credit_id (INTEGER): Ссылка на кредит.
default_date (DATE): Дата наступления дефолта.
default_amount (NUMERIC(15,2)): Непогашенная сумма на момент дефолта.
recovery_amount (NUMERIC(15,2)): Сумма, восстановленная после дефолта (например, за счет взыскания).
reason_for_default (ENUM): Причина дефолта ('Просрочка', 'Банкротство', 'Реструктуризация', 'Ликвидация', 'Цессия').

**Таблица:** ***credit_reserves***

reserve_id (SERIAL): Уникальный идентификатор резерва.
credit_id (INTEGER): Ссылка на кредит.
reserve_stage (ENUM): Этап резервирования (Стадия 1 — стандартный риск, Стадия 2 — повышенный риск, Стадия 3 — критический риск).
reserve_amount (NUMERIC(15,2)): Зарезервированная сумма для покрытия потенциальных убытков.

### Примеры запросов

**Запрос:** "Какое количество ипотек было взято за последний год?"  

**Запрос:** "Покажите динамику доходности портфеля за последний год."  

**Запрос:** "Выведи топ-10 наименее закредитованных 

**Запрос:** "Какие существуют причины дефолта?"
  

## Как собрать проект

Для корректного запуска проекта необходимо иметь:
* Ubuntu 20.02
* Python 3.11
* Nginx 
* PostgreSQL

Для сборки и запуска проекта выполните следующие шаги:

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/ваш-репозиторий.git

2. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt

3. **Запустите проект:**
   ```bash
   python app.py

2. **Откройте веб-интерфейс:**
   Перейдите по адресу, указанному в терминале после запуска (например, http://localhost:5000).
